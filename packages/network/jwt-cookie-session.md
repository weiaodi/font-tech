Cookie在用户主动注销时，通常不会出现像JWT那样的问题，这主要与Cookie的工作机制和服务器对其的管理方式有关，具体如下：

- **Cookie的工作原理**：Cookie是服务器发送到用户浏览器并保存在本地的小块数据。当用户登录时，服务器会在响应中设置包含用户身份信息等的Cookie，客户端浏览器会将其保存。在后续请求中，浏览器会自动携带这些Cookie发送给服务器，服务器通过识别Cookie中的信息来验证用户身份。
- **服务器对Cookie的管理**：与JWT不同，服务器可以对Cookie进行明确的控制和管理。当用户注销时，服务器可以通过设置Cookie的过期时间为过去的某个时间，或者发送一个同名但值为空的Cookie来覆盖原来的Cookie，通知浏览器删除该Cookie。这样，当客户端再次向服务器发送请求时，就不会再携带已注销的Cookie，服务器也就能够识别出用户已经注销，从而拒绝相关的访问请求。

不过，如果客户端不遵守服务器的Cookie管理规则，或者存在多个客户端共享Cookie等情况，也可能会出现一些类似JWT的问题，但在正常的Web应用场景下，通过合理的Cookie管理机制，能够较好地解决用户注销后的身份验证问题。

# 三者都是应用在web中对http无状态协议的补充，达到状态保持的目的

cookie：cookie中的信息是以键值对的形式储存在浏览器中，而且在浏览器中可以直接看到数据。

session：session存储在服务器中，然后发送一个cookie存储在浏览器中，cookie中存储的是session_id，之后每次请求服务器通过session_id可以获取对应的session信息

JWT：JWT存储在浏览器的storage或者cookie中。由服务器产生加密的json数据包括：header，payload和signature三部分组成。header中通常来说由token的生成算法和类型组成；payload中则用来保存相关的状态信息；signature部分由header，payload，secret_key三部分加密生成。 注意，不要在JWT的payload或header中放置敏感信息，除非它们是加密的。

cookie:

优点：
结构简单。cookie是一种基于文本的轻量结构，包含简单的键值对。
数据持久。虽然客户端计算机上cookie的持续时间取决于客户端上的cookie过期处理和用户干预，cookie通常是客户端上持续时间最长的数据保留形式。
缺点：
大小受到限制。大多数浏览器对 cookie 的大小有 4096 字节的限制，尽管在当今新的浏览器和客户端设备版本中，支持 8192 字节的 cookie 大小已愈发常见。
非常不安全。cookie将数据裸露在浏览器中，这样大大增大了数据被盗取的风险，所有我们不应该将中要的数据放在cookie中，或者将数据加密处理。
容易被csrf攻击。可以设置csrf_token来避免攻击。
session：

优点：
session的信息存储在服务端，相比于cookie就在一定程度上加大了数据的安全性；相比于jwt方便进行管理，也就是说当用户登录和主动注销，只需要添加删除对应的session就可以，这样管理起来很方便。
缺点：
session存储在服务端，这就增大了服务器的开销，当用户多的情况下，服务器性能会大大降低。
因为是基于cookie来进行用户识别的, cookie如果被截获，用户就会很容易受到跨站请求伪造的攻击。
用户认证之后，服务端做认证记录，如果认证的记录被保存在内存中的话，这意味着用户下次请求还必须要请求在这台服务器上,这样才能拿到授权的资源，这样在分布式的应用上，会限制负载均衡和集群水平拓展的能力。
JWT：

优点：
因为json的通用性，jwt可以支持跨语言请求，像JAVA,JavaScript,PHP等很多语言都可以使用。
因为有了payload部分，所以JWT可以在自身存储一些其他业务逻辑所必要的非敏感信息。
便于传输，JWT的构成非常简单，字节占用很小，所以它是非常便于传输的。
不需要在服务端保存会话信息, 利于服务器横向拓展。
缺点：
登录状态信息续签问题。比如设置token的有效期为一个小时，那么一个小时后，如果用户仍然在这个web应用上，这个时候当然不能指望用户再登录一次。目前可用的解决办法是在每次用户发出请求都返回一个新的token，前端再用这个新的token来替代旧的，这样每一次请求都会刷新token的有效期。但是这样，需要频繁的生成token。另外一种方案是判断还有多久这个token会过期，在token快要过期时，返回一个新的token。
用户主动注销。JWT并不支持用户主动退出登录，客户端在别处使用token仍然可以正常访问。为了支持注销，我的解决方案是在注销时将该token加入到服务器的redis黑名单中。
