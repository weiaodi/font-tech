在 CSS 属性值计算过程中，重要声明和非重要声明在层叠机制里有着不同的优先级规则，下面为你详细解释这两部分内容。

### 重要声明的优先级规则

重要声明的优先级高于所有非重要声明。不管样式的来源是什么，只要是重要声明，就会覆盖非重要声明。也就是说，一旦有重要声明存在，它会先忽略非重要声明，直接生效。

#### 优先级顺序

在重要声明内部，按照样式来源的优先级排序为：用户代理默认样式 > 读者提供的样式 > 开发者编写的样式。

- **用户代理默认样式**：指浏览器自带的默认样式。例如，`a` 标签默认有下划线，`h1` 标签字体较大等。若用户代理默认样式里有重要声明，它会覆盖读者提供的重要声明和开发者编写的重要声明。
- **读者提供的样式**：一般是用户通过浏览器设置或者扩展程序等方式应用的样式。在重要声明的范畴内，其优先级高于开发者编写的样式，但低于用户代理默认样式。
- **开发者编写的样式**：是开发者在 CSS 文件或者 `<style>` 标签中定义的样式。在重要声明里，它的优先级最低。

#### 示例代码

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>重要声明示例</title>
    <style>
      /* 开发者编写的重要声明 */
      p {
        color: red !important;
      }
    </style>
  </head>

  <body>
    <!-- 假设读者通过浏览器扩展应用了以下重要声明 -->
    <p style="color: blue !important;">这是一个段落。</p>
    <!-- 由于读者提供的重要声明优先级高于开发者编写的重要声明，所以段落文字颜色为蓝色 -->
  </body>
</html>
```

### 非重要声明的优先级规则

非重要声明的优先级低于重要声明。在没有重要声明的情况下，非重要声明会按照自身的优先级规则来确定最终应用的样式。

#### 优先级顺序

非重要声明按照样式来源的优先级排序为：开发者编写的样式 > 读者提供的样式 > 用户代理默认样式。

- **开发者编写的样式**：通常是开发者为网页专门设计的样式，在非重要声明中优先级最高。开发者可以通过类名、ID、元素选择器等方式来精确控制元素的样式。
- **读者提供的样式**：优先级低于开发者编写的样式，但高于用户代理默认样式。不过在实际应用中，读者提供的样式使用场景相对较少。
- **用户代理默认样式**：在非重要声明里优先级最低。当开发者和读者都没有对某个元素的样式进行声明时，才会应用用户代理默认样式。

#### 示例代码

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>非重要声明示例</title>
    <style>
      /* 开发者编写的非重要声明 */
      p {
        color: red;
      }
    </style>
  </head>

  <body>
    <!-- 读者提供的非重要声明 -->
    <p style="color: blue;">这是一个段落。</p>
    <!-- 由于开发者编写的非重要声明优先级高于读者提供的非重要声明，所以段落文字颜色为红色 -->
  </body>
</html>
```

### 总结

找到匹配特定元素的所有规则，包括开发者编写的样式、用户代理默认样式和读者提供的样式。
根据层叠机制排序：
按重要性排序，重要声明干掉所有非重要声明

相同的再按样式来源排序：
重要声明：用户代理默认样式 > 读者提供的样式 > 开发者编写的样式
非重要声明：开发者编写的样式 > 读者提供的样式 > 用户代理默认样式

还相同的计算选择器特指度排序

最后还有相同的按照声明前后排序，后面的覆盖前面的

对于三个样式表里都没有声明的属性，尝试从父元素继承
不可继承的属性，只能使用默认值了
